#include <iostream>
#include <string>
#include <windows.h>

#include "petshop.h"

double checkoutList() {
    int p_count = 0, count = 0;
    double total = 0, money;

    displayMenu();
    
    cout << "â”ƒ\t\t\t\t\t\t\t\tð—– ð—› ð—˜ ð—– ð—ž ð—¢ ð—¨ ð—§\t\t\t\t\t\t\t\tâ”ƒ" << endl;
    cout << "â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«" << endl;
    cout << "â”ƒ\t\t\t\tProduct Name\t\t\t\tâ”ƒ\t\t  Quantity      \tâ”ƒ\t      Price  \t\tâ”ƒ" << endl;
    cout << "â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«" << endl;
    cout << "â”ƒ\t\t\t\t\t\t\t\t\tâ”ƒ\t\t\t\t\tâ”ƒ\t\t\t\tâ”ƒ" << endl;

    // counter for number of product in user's cart
    for (int j = 0; j < checkouts.size(); j++) {
        p_count++;
    }

    // display user's product in cart
    for (int i = 0; i < checkouts.size(); i++) {
        int p_num = checkouts[i].product;

        total += (products[p_num].price * checkouts[i].quantity);

        cout << "â”ƒ\t\t\t[" << p_num << "] " << products[p_num].name << "\t\t\t";

        if (products[p_num].name.length() <= 10) cout << "\t\t";
        else if (products[p_num].name.length() <= 19 && p_num < 10) cout << "\t";
        else if (products[p_num].name.length() <= 18 && p_num >= 10) cout << "\t";

        cout << "â”ƒ\t\t     " << checkouts[i].quantity << "   \t\tâ”ƒ\t      â‚± " << products[p_num].price << "   \t\tâ”ƒ" << endl;

        string details = products[p_num].animal + "\'s " + products[p_num].category;

        cout << "â”ƒ\t\t\t  âœ±  " << details << "     \t\t";

        if (details.length() <= 10) cout << "\t\t";
        else if (details.length() <= 18 && p_num >= 10) cout << "\t";

        cout << "â”ƒ\t\t\t\t\tâ”ƒ\t\t\t\tâ”ƒ" << endl;
                
        count++; // increment for separation line
                
        // separation for multiple product in cart
        if (count > 0 && p_count != count) {
            cout << "â”ƒ\t\t\t\t\t\t\t\t\tâ”ƒ\t\t\t\t\tâ”ƒ\t\t\t\tâ”ƒ" << endl;
            cout << "â”ƒâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ƒ" << endl;
            cout << "â”ƒ\t\t\t\t\t\t\t\t\tâ”ƒ\t\t\t\t\tâ”ƒ\t\t\t\tâ”ƒ" << endl;
        }
    }

    total += 10; // add system fee to total price

    cout << "â”ƒ\t\t\t\t\t\t\t\t\tâ”ƒ\t\t\t\t\tâ”ƒ\t\t\t\tâ”ƒ" << endl;
    cout << "â”ƒâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ƒ" << endl;
    cout << "â”ƒ\t\t\t\t\t\t\t\t\tâ”ƒ\t\t\t\t\tâ”ƒ\t\t\t\tâ”ƒ" << endl;
    cout << "â”ƒ\t\t\t\tSystem Fee\t\t\t\tâ”ƒ\t\t\t\t\tâ”ƒ\t      â‚± 10   \t\tâ”ƒ" << endl;
    cout << "â”ƒ\t\t\t\t\t\t\t\t\tâ”ƒ\t\t\t\t\tâ”ƒ\t\t\t\tâ”ƒ" << endl;
    cout << "â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«" << endl;
    cout << "â”ƒ\t\t\t" << checkouts[0].date << "\t\t\t\t\t\t\tTotal:\t\tâ”ƒ\t     â‚± " << total << "  \t\tâ”ƒ" << endl;
    cout << "â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›" << endl << endl;

    return total;
}